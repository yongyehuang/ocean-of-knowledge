Keep hard! Keep coding! Keep reading papers!

论文记号：高亮表示核心内容；下划线表示重要内容；波浪线表示有疑问或者需要继续跟进的内容。

2018-04
## Learning Fine-grained Image Similarity with Deep Ranking
2014，这篇论文提出了 triplet loss 的方法来进行图片的细粒度相似度排序。里边的网络结构比较简单，Multi-scale 的AlexNet。损失函数的形式也是非常简单，重点在于如何去构建三元组（pi,pi+,pi-）。

step1：计算每个样本和它同类的每个样本的相似度，计算得分，根据每个样本的得分来选择 pi。

step2:选择pi+使得r(i,i+)更大的样本，也就是和pi更加相似的样本。（？？这里不是很理解，在本文中是相似度排序可以这样做，如果是检索的话应该选择困难样本，但是现在的方式并不是选困难样本）

step3：选择pi-有两种方式，第一种直接从pi所属的类之外的其他所有类别中选，均匀采样就行了。第二种方法是从pi所属的类内进行选择，并且pi-应该满足r(i,i-)尽量小。

在实际模型训练的过程中，文中是把每个类别的样本放在一个桶（bucket）中，这样子如果确定了pi之后，就可以按照上面三个步骤进行样本的采样。而如果样本的数量非常多的话，没有办法一次性把所有样本都放入内存中，文中提出使用**蓄水池抽样算法**来采样。

Q1：这个文章中主要是实现样本相似度的排序，这里在采样的过程中好像并没有采用困难样本对采样的方法。

Q2：蓄水池抽样算法的原理需要理解。

Q3: 在最开始的时候是怎么挑选样本对的，因为一开始的时候模型没有训练，没办法计算样本之间的相似度呀？

所以我觉得开始的时候应该是有个预训练的过程吧，比如使用 softmax 来进行预训练。
